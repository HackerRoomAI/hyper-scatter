{"version":3,"file":"benchmark-Crul1H9r.js","sources":["../../benchmark.html?html-proxy&index=1.js"],"sourcesContent":["\n    import './src/benchmarks/browser.ts';\n\n    const canvas = document.getElementById('canvas');\n    const candidateCanvas = document.getElementById('candidateCanvas');\n    const runBenchmarkBtn = document.getElementById('runBenchmark');\n    const runAccuracyBtn = document.getElementById('runAccuracy');\n    const copyResultsBtn = document.getElementById('copyResults');\n    const progressContainer = document.getElementById('progressContainer');\n    const progressFill = document.getElementById('progressFill');\n    const progressText = document.getElementById('progressText');\n    const resultsTable = document.getElementById('resultsTable');\n    const jsonOutput = document.getElementById('jsonOutput');\n    const accuracyResults = document.getElementById('accuracyResults');\n\n    // Tab switching\n    document.querySelectorAll('.tabs button').forEach(tab => {\n      tab.addEventListener('click', () => {\n        document.querySelectorAll('.tabs button').forEach(t => t.classList.remove('active'));\n        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));\n        tab.classList.add('active');\n        document.getElementById(tab.dataset.tab + 'Tab').classList.add('active');\n      });\n    });\n\n    // Resize canvas\n    function resizeCanvas() {\n      const rect = canvas.parentElement.getBoundingClientRect();\n      canvas.style.width = (rect.width - 16) + 'px';\n      if (candidateCanvas) candidateCanvas.style.width = canvas.style.width;\n    }\n    resizeCanvas();\n    window.addEventListener('resize', resizeCanvas);\n\n    let lastReport = null;\n\n    function getConfig() {\n      return {\n        renderer: document.getElementById('rendererSelect').value,\n        pointCounts: Array.from(document.getElementById('pointCountsSelect').selectedOptions).map(o => parseInt(o.value)),\n        geometries: Array.from(document.getElementById('geometriesSelect').selectedOptions).map(o => o.value),\n        warmupFrames: 5,\n        measuredFrames: parseInt(document.getElementById('measuredFrames').value),\n        hitTestSamples: parseInt(document.getElementById('hitTestSamples').value),\n      };\n    }\n\n    runBenchmarkBtn.addEventListener('click', async () => {\n      const config = getConfig();\n      if (config.pointCounts.length === 0 || config.geometries.length === 0) {\n        alert('Select at least one point count and geometry');\n        return;\n      }\n\n      runBenchmarkBtn.disabled = runAccuracyBtn.disabled = true;\n      progressContainer.classList.add('active');\n\n      try {\n        const report = await window.VizBenchmark.runBenchmarks(canvas, config, (msg, p) => {\n          progressFill.value = p * 100;\n          progressText.textContent = msg;\n        });\n        lastReport = report;\n        resultsTable.innerHTML = window.VizBenchmark.formatResultsHTML(report);\n        jsonOutput.textContent = JSON.stringify(report, null, 2);\n        copyResultsBtn.disabled = false;\n        console.log(window.VizBenchmark.formatResultsTable(report));\n      } catch (err) {\n        resultsTable.innerHTML = `<p class=\"placeholder\" style=\"color:#ef4444\">Benchmark failed: ${err.message}</p>`;\n      } finally {\n        runBenchmarkBtn.disabled = runAccuracyBtn.disabled = false;\n        progressContainer.classList.remove('active');\n      }\n    });\n\n    runAccuracyBtn.addEventListener('click', async () => {\n      runBenchmarkBtn.disabled = runAccuracyBtn.disabled = true;\n      progressContainer.classList.add('active');\n\n      try {\n        const reports = await window.VizBenchmark.runAccuracyBenchmarks(canvas, (msg, p) => {\n          progressFill.value = p * 100;\n          progressText.textContent = msg;\n        });\n\n        let html = '';\n        for (const report of reports) {\n          html += `<h2>${report.geometry.toUpperCase()}</h2>`;\n          html += `<p style=\"margin-bottom:.5rem\">Result: <strong style=\"color:${report.allPassed ? '#22c55e' : '#ef4444'}\">${report.summary}</strong></p>`;\n          for (const test of report.tests) {\n            html += `<div class=\"test-result ${test.passed ? 'pass' : 'fail'}\">`;\n            html += `${test.passed ? '✓' : '✗'} ${test.operation}: maxError=${test.maxError.toExponential(2)}`;\n            if (!test.passed && test.details) html += `<br><small>${test.details}</small>`;\n            html += `</div>`;\n          }\n        }\n        accuracyResults.innerHTML = html;\n\n        // Switch to accuracy tab\n        document.querySelectorAll('.tabs button').forEach(t => t.classList.remove('active'));\n        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));\n        document.querySelector('[data-tab=\"accuracy\"]').classList.add('active');\n        document.getElementById('accuracyTab').classList.add('active');\n      } catch (err) {\n        accuracyResults.innerHTML = `<p class=\"placeholder\" style=\"color:#ef4444\">Accuracy tests failed: ${err.message}</p>`;\n      } finally {\n        runBenchmarkBtn.disabled = runAccuracyBtn.disabled = false;\n        progressContainer.classList.remove('active');\n      }\n    });\n\n    copyResultsBtn.addEventListener('click', () => {\n      if (lastReport) {\n        navigator.clipboard.writeText(JSON.stringify(lastReport, null, 2));\n        copyResultsBtn.textContent = 'Copied!';\n        setTimeout(() => copyResultsBtn.textContent = 'Copy JSON', 2000);\n      }\n    });\n  "],"names":["canvas","candidateCanvas","runBenchmarkBtn","runAccuracyBtn","copyResultsBtn","progressContainer","progressFill","progressText","resultsTable","jsonOutput","accuracyResults","tab","t","c","resizeCanvas","rect","lastReport","getConfig","o","config","report","msg","p","err","reports","html","test"],"mappings":"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"}